(()=>{var e={};e.id=289,e.ids=[289],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6782:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c}),s(3307),s(7224),s(7824);var a=s(3282),r=s(5736),n=s(3906),i=s.n(n),o=s(6880),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["tasks",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3307)),"/Users/aryanrathore/Desktop/Myraid/apps/web/src/app/tasks/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,7224)),"/Users/aryanrathore/Desktop/Myraid/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7824,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/aryanrathore/Desktop/Myraid/apps/web/src/app/tasks/page.tsx"],u="/tasks/page",p={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/tasks/page",pathname:"/tasks",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8349:(e,t,s)=>{Promise.resolve().then(s.bind(s,748)),Promise.resolve().then(s.t.bind(s,6568,23))},5887:(e,t,s)=>{Promise.resolve().then(s.bind(s,1726))},3101:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,4424,23)),Promise.resolve().then(s.t.bind(s,7752,23)),Promise.resolve().then(s.t.bind(s,5275,23)),Promise.resolve().then(s.t.bind(s,9842,23)),Promise.resolve().then(s.t.bind(s,1633,23)),Promise.resolve().then(s.t.bind(s,9224,23))},748:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var a=s(3227),r=s(649),n=s(1043),i=s(3677);function o(){let e=(0,n.useRouter)();(0,n.usePathname)();let[t,s]=(0,i.useState)(!1),[o,l]=(0,i.useState)(!0),c=async()=>{await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),s(!1),e.push("/")};return o?a.jsx("div",{className:"nav-links"}):a.jsx("div",{className:"nav-links",children:t?(0,a.jsxs)(a.Fragment,{children:[a.jsx(r.default,{href:"/tasks",children:"Tasks"}),a.jsx("button",{className:"button secondary nav-logout",onClick:c,children:"Logout"})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(r.default,{href:"/login",children:"Login"}),a.jsx(r.default,{href:"/register",children:"Register"})]})})}},1726:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(3227),r=s(3677);function n(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),[l,c]=(0,r.useState)("todo"),[d,u]=(0,r.useState)(1),[p]=(0,r.useState)(8),[h,m]=(0,r.useState)(0),[x,g]=(0,r.useState)(""),[j,b]=(0,r.useState)(""),[v,y]=(0,r.useState)(!1),[k,f]=(0,r.useState)(null),N=(0,r.useMemo)(()=>Math.max(Math.ceil(h/p),1),[h,p]),w=async()=>{y(!0),f(null);let e=new URLSearchParams({page:String(d),pageSize:String(p)});x&&e.set("status",x),j&&e.set("search",j);try{let s=await fetch(`/api/tasks?${e.toString()}`,{credentials:"include"});if(!s.ok){let e=await s.json();throw Error(e?.error?.message||"Failed to load tasks")}let a=await s.json();t(a.items),m(a.total)}catch(e){f(e instanceof Error?e.message:"Failed to load tasks")}finally{y(!1)}},P=async e=>{e.preventDefault(),f(null);try{let e=await fetch("/api/tasks",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({title:s,description:i,status:l})});if(!e.ok){let t=await e.json();throw Error(t?.error?.message||"Failed to create task")}n(""),o(""),c("todo"),u(1),await w()}catch(e){f(e instanceof Error?e.message:"Failed to create task")}},S=async(e,t)=>{f(null);try{let s=await fetch(`/api/tasks/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({status:t})});if(!s.ok){let e=await s.json();throw Error(e?.error?.message||"Failed to update task")}await w()}catch(e){f(e instanceof Error?e.message:"Failed to update task")}},_=async e=>{f(null);try{let t=await fetch(`/api/tasks/${e}`,{method:"DELETE",credentials:"include"});if(!t.ok&&204!==t.status){let e=await t.json();throw Error(e?.error?.message||"Failed to delete task")}await w()}catch(e){f(e instanceof Error?e.message:"Failed to delete task")}};return(0,a.jsxs)("main",{className:"grid",children:[(0,a.jsxs)("section",{className:"panel",children:[a.jsx("h1",{children:"Your tasks"}),(0,a.jsxs)("form",{className:"form",onSubmit:P,children:[a.jsx("label",{className:"label",children:"Title"}),a.jsx("input",{className:"input",value:s,onChange:e=>n(e.target.value),required:!0}),a.jsx("label",{className:"label",children:"Description"}),a.jsx("textarea",{className:"input",value:i,onChange:e=>o(e.target.value),rows:3,required:!0}),a.jsx("label",{className:"label",children:"Status"}),(0,a.jsxs)("select",{className:"input",value:l,onChange:e=>c(e.target.value),children:[a.jsx("option",{value:"todo",children:"Todo"}),a.jsx("option",{value:"in_progress",children:"In progress"}),a.jsx("option",{value:"done",children:"Done"})]}),a.jsx("button",{className:"button",type:"submit",children:"Create task"})]})]}),(0,a.jsxs)("section",{className:"panel",children:[(0,a.jsxs)("div",{className:"toolbar",children:[a.jsx("input",{className:"input",placeholder:"Search title",value:j,onChange:e=>b(e.target.value)}),a.jsx("button",{className:"button secondary",type:"button",onClick:()=>w(),children:"Search"}),(0,a.jsxs)("select",{className:"input",value:x,onChange:e=>{g(e.target.value),u(1)},children:[a.jsx("option",{value:"",children:"All status"}),a.jsx("option",{value:"todo",children:"Todo"}),a.jsx("option",{value:"in_progress",children:"In progress"}),a.jsx("option",{value:"done",children:"Done"})]})]}),k&&a.jsx("p",{className:"notice",children:k}),v?a.jsx("p",{className:"notice",children:"Loading tasks..."}):a.jsx("div",{className:"grid",children:e.map(e=>(0,a.jsxs)("article",{className:"task",children:[(0,a.jsxs)("div",{className:"toolbar",style:{justifyContent:"space-between"},children:[a.jsx("span",{className:"task-title",children:e.title}),a.jsx("span",{className:"badge",children:e.status.replace("_"," ")})]}),a.jsx("p",{children:e.description}),(0,a.jsxs)("small",{className:"notice",children:["Created ",new Date(e.createdAt).toLocaleDateString()]}),(0,a.jsxs)("div",{className:"toolbar",children:[(0,a.jsxs)("select",{className:"input",value:e.status,onChange:t=>S(e.id,t.target.value),children:[a.jsx("option",{value:"todo",children:"Todo"}),a.jsx("option",{value:"in_progress",children:"In progress"}),a.jsx("option",{value:"done",children:"Done"})]}),a.jsx("button",{className:"button secondary",type:"button",onClick:()=>_(e.id),children:"Delete"})]})]},e.id))}),(0,a.jsxs)("div",{className:"toolbar",style:{justifyContent:"space-between"},children:[a.jsx("button",{className:"button secondary",type:"button",onClick:()=>u(e=>Math.max(e-1,1)),disabled:d<=1,children:"Prev"}),(0,a.jsxs)("span",{className:"notice",children:["Page ",d," of ",N]}),a.jsx("button",{className:"button secondary",type:"button",onClick:()=>u(e=>Math.min(e+1,N)),disabled:d>=N,children:"Next"})]})]})]})}},7224:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u,metadata:()=>d});var a=s(9013);s(5556);var r=s(6787),n=s(3189);let i=(0,n.createProxy)(String.raw`/Users/aryanrathore/Desktop/Myraid/apps/web/src/app/nav-links.tsx`),{__esModule:o,$$typeof:l}=i;i.default;let c=(0,n.createProxy)(String.raw`/Users/aryanrathore/Desktop/Myraid/apps/web/src/app/nav-links.tsx#default`),d={title:"Task Harbor",description:"Task management for focused teams"};function u({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{children:(0,a.jsxs)("div",{className:"shell",children:[(0,a.jsxs)("nav",{className:"nav",children:[a.jsx(r.default,{className:"brand",href:"/",children:"Task Harbor"}),a.jsx(c,{})]}),e]})})})}},3307:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>o});var a=s(3189);let r=(0,a.createProxy)(String.raw`/Users/aryanrathore/Desktop/Myraid/apps/web/src/app/tasks/page.tsx`),{__esModule:n,$$typeof:i}=r;r.default;let o=(0,a.createProxy)(String.raw`/Users/aryanrathore/Desktop/Myraid/apps/web/src/app/tasks/page.tsx#default`)},5556:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[522,447],()=>s(6782));module.exports=a})();