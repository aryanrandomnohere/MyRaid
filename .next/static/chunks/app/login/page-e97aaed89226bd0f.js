(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{6456:function(e,t,a){Promise.resolve().then(a.bind(a,9343))},9343:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var n=a(7573),s=a(7754),i=a(7653);function u(){let e=(0,s.useRouter)(),[t,a]=(0,i.useState)(""),[u,l]=(0,i.useState)(""),[r,c]=(0,i.useState)(null),[o,d]=(0,i.useState)(!1);(0,i.useEffect)(()=>{(async()=>{try{(await fetch("/api/auth/me",{credentials:"include"})).ok&&e.push("/tasks")}catch(e){}})()},[e]);let h=async a=>{a.preventDefault(),c(null),d(!0);try{let a=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:t,password:u})});if(!a.ok){var n;let e=await a.json();throw Error((null==e?void 0:null===(n=e.error)||void 0===n?void 0:n.message)||"Login failed")}e.push("/tasks")}catch(e){c(e instanceof Error?e.message:"Login failed")}finally{d(!1)}};return(0,n.jsxs)("main",{className:"panel",children:[(0,n.jsx)("h1",{children:"Welcome back"}),(0,n.jsx)("p",{className:"notice",children:"Sign in to access your tasks."}),(0,n.jsxs)("form",{className:"form",onSubmit:h,children:[(0,n.jsx)("label",{className:"label",children:"Email"}),(0,n.jsx)("input",{className:"input",type:"email",value:t,onChange:e=>a(e.target.value),required:!0}),(0,n.jsx)("label",{className:"label",children:"Password"}),(0,n.jsx)("input",{className:"input",type:"password",value:u,onChange:e=>l(e.target.value),required:!0}),r&&(0,n.jsx)("p",{className:"notice",children:r}),(0,n.jsx)("button",{className:"button",type:"submit",disabled:o,children:o?"Signing in...":"Sign in"})]})]})}},7754:function(e,t,a){"use strict";var n=a(534);a.o(n,"usePathname")&&a.d(t,{usePathname:function(){return n.usePathname}}),a.o(n,"useRouter")&&a.d(t,{useRouter:function(){return n.useRouter}})}},function(e){e.O(0,[293,286,744],function(){return e(e.s=6456)}),_N_E=e.O()}]);