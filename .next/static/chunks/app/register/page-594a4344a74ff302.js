(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{4524:function(e,t,a){Promise.resolve().then(a.bind(a,1951))},1951:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var s=a(7573),n=a(7754),r=a(7653);function u(){let e=(0,n.useRouter)(),[t,a]=(0,r.useState)(""),[u,i]=(0,r.useState)(""),[l,c]=(0,r.useState)(null),[o,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{try{(await fetch("/api/auth/me",{credentials:"include"})).ok&&e.push("/tasks")}catch(e){}})()},[e]);let h=async a=>{a.preventDefault(),c(null),d(!0);try{let a=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:t,password:u})});if(!a.ok){var s;let e=await a.json();throw Error((null==e?void 0:null===(s=e.error)||void 0===s?void 0:s.message)||"Registration failed")}e.push("/tasks")}catch(e){c(e instanceof Error?e.message:"Registration failed")}finally{d(!1)}};return(0,s.jsxs)("main",{className:"panel",children:[(0,s.jsx)("h1",{children:"Create your account"}),(0,s.jsx)("p",{className:"notice",children:"Use a strong password (8+ characters)."}),(0,s.jsxs)("form",{className:"form",onSubmit:h,children:[(0,s.jsx)("label",{className:"label",children:"Email"}),(0,s.jsx)("input",{className:"input",type:"email",value:t,onChange:e=>a(e.target.value),required:!0}),(0,s.jsx)("label",{className:"label",children:"Password"}),(0,s.jsx)("input",{className:"input",type:"password",value:u,onChange:e=>i(e.target.value),required:!0,minLength:8}),l&&(0,s.jsx)("p",{className:"notice",children:l}),(0,s.jsx)("button",{className:"button",type:"submit",disabled:o,children:o?"Creating...":"Create account"})]})]})}},7754:function(e,t,a){"use strict";var s=a(534);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})}},function(e){e.O(0,[293,286,744],function(){return e(e.s=4524)}),_N_E=e.O()}]);